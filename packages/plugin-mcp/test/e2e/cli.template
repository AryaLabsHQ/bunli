#!/usr/bin/env bun
/**
 * Generated CLI for {{SERVER_NAME}} MCP server
 * Generated by @bunli/plugin-mcp E2E tests
 */
import { createCLI, defineCommand, option } from '@bunli/core'
import { z } from 'zod'

// ============================================================================
// Configuration
// ============================================================================

const DEFAULT_TIMEOUT = {{DEFAULT_TIMEOUT}}

// ============================================================================
// Helpers (stubbed for snapshot testing)
// ============================================================================

async function callTool(toolName: string, args: Record<string, unknown>): Promise<unknown> {
  // Stub implementation - in real usage this would call the MCP server
  throw new Error(`callTool not implemented: ${toolName}`)
}

function printResult(result: unknown, format: string): void {
  switch (format) {
    case 'json':
      console.log(JSON.stringify(result, null, 2))
      return
    case 'raw':
      console.log(JSON.stringify(result, null, 2))
      return
    default:
      console.log(result)
  }
}

// ============================================================================
// Commands
// ============================================================================

{{COMMANDS}}

// ============================================================================
// Main
// ============================================================================

async function main() {
  const cli = await createCLI({
    name: '{{SERVER_NAME}}',
    description: 'CLI for {{SERVER_NAME}} MCP server',
    version: '1.0.0',
  })

{{REGISTRATIONS}}

  await cli.run()
}

main().catch((error) => {
  console.error(error instanceof Error ? error.message : String(error))
  process.exit(1)
})
